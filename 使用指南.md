# Hexo 博客使用指南

## 目录
- [环境准备](#环境准备)
- [添加新博客](#添加新博客)
- [删除博客](#删除博客)
- [批量导入博客](#批量导入博客)
- [本地预览](#本地预览)
- [发布到GitHub](#发布到github)
- [常见问题](#常见问题)

---

## 环境准备

确保已安装:
- Node.js (建议 v16+)
- Git
- Hexo CLI: `npm install -g hexo-cli`


---

## 添加新博客

### 方法一: 使用 Hexo 命令创建(推荐)

```powershell

# 创建新文章
hexo new "文章标题"

# 如果标题包含空格,用引号括起来
hexo new "我的第一篇博客"
```

这会在 `source\_posts\` 目录下创建:
- `文章标题.md` - 文章文件
- `文章标题/` - 同名资源文件夹(用于存放图片等)

### 方法二: 手动创建

1. 在 `source\_posts\` 目录下创建 `文章名.md` 文件
2. 添加 Front Matter(文章头部信息):

```markdown
---
title: 文章标题
date: 2025-11-14 10:00:00
categories:
  - 分类名称
tags:
  - 标签1
  - 标签2
---

这里开始写文章内容...
```

### 添加图片到文章

1. 将图片放在文章同名文件夹中,例如:
   ```
   source\_posts\
     ├─ 我的文章.md
     └─ 我的文章\
         ├─ image1.png
         └─ image2.jpg
   ```

2. 在文章中使用 Hexo 标签语法引用图片:
   ```markdown
   {% asset_img image1.png 图片描述 %}
   ```

**注意**: 不要使用 `![](image1.png)` 这种 Markdown 语法,Hexo 可能无法正确处理。

---

## 删除博客

### 删除单篇文章

```powershell
cd "d:\个人网页\Stellogic.github.io"

# 删除文章文件
Remove-Item "source\_posts\文章名.md" -Force

# 删除对应的资源文件夹(如果有)
Remove-Item "source\_posts\文章名" -Recurse -Force
```

### 删除所有文章

```powershell
cd "d:\个人网页\Stellogic.github.io"

# 删除所有 .md 文件
Remove-Item "source\_posts\*.md" -Force

# 删除所有资源文件夹
Get-ChildItem "source\_posts" -Directory | Remove-Item -Recurse -Force
```

---

## 批量导入博客

使用项目提供的 `Import-Notes.ps1` 脚本批量导入 Markdown 笔记。

### 基本用法

```powershell
cd "d:\个人网页\Stellogic.github.io"

# 导入笔记到指定分类
./tools/Import-Notes.ps1 -SourcePath "C:\你的笔记目录" -Categories "分类名称"
```

### 参数说明

| 参数 | 必填 | 说明 | 示例 |
|------|------|------|------|
| `-SourcePath` | ✅ | 源笔记目录路径 | `"C:\笔记"` |
| `-Categories` | ✅ | 文章分类 | `"学习笔记"` |
| `-DestinationDirectory` | ❌ | 目标目录(默认: `source\_posts`) | `"source\_posts"` |
| `-WhatIf` | ❌ | 预览模式,不实际操作 | 添加 `-WhatIf` |
| `-Verbose` | ❌ | 显示详细日志 | 添加 `-Verbose` |

### 完整示例

```powershell
# 示例1: 导入力扣笔记
./tools/Import-Notes.ps1 `
    -SourcePath "C:\Users\lizhuo\IdeaProjects\JavaStudyDataStructurePractice\力扣hot100笔记" `
    -Categories "力扣hot100"

# 示例2: 导入算法笔记,带标签
./tools/Import-Notes.ps1 `
    -SourcePath "D:\学习笔记\算法" `
    -Categories "算法学习"

# 示例3: 预览模式(不实际导入)
./tools/Import-Notes.ps1 `
    -SourcePath "D:\笔记" `
    -Categories "测试" `
    -WhatIf

# 示例4: 清空现有文章后重新导入
Remove-Item "source\_posts\*.md" -Force
Get-ChildItem "source\_posts" -Directory | Remove-Item -Recurse -Force
./tools/Import-Notes.ps1 -SourcePath "C:\新笔记" -Categories "新分类"
```

### 脚本功能

✅ **自动处理**:
- 为每篇文章生成 Front Matter(标题、日期、分类、标签)
- 创建文章同名资源文件夹
- 复制图片到资源文件夹
- 转换图片引用为 Hexo 标签格式: `{% asset_img %}`
- 根据文件名自动生成标签

✅ **支持的图片格式**:
- Markdown 图片: `![](路径)`
- HTML 图片: `<img src="路径">`
- 相对路径和绝对路径

✅ **智能标签生成**:
- 文件名中的关键词自动转为标签
- 例如: `二分查找.md` → 标签: `二分查找`

---

## 本地预览

### 启动服务器

```powershell
cd "d:\个人网页\Stellogic.github.io"

# 清理缓存
npx hexo clean

# 生成静态文件
npx hexo generate

# 启动本地服务器
npx hexo server
```

访问: http://localhost:4000

### 快捷命令

```powershell
# 清理 + 生成 + 启动服务器(一条命令)
npx hexo clean; npx hexo generate; npx hexo server

# 或使用简写
npx hexo clean; npx hexo g; npx hexo s
```

### 停止服务器

- 按 `Ctrl + C`
- 或使用命令: `Stop-Process -Name node -Force`

---

## 发布到GitHub

### 首次配置(仅需一次)

1. 确认 Git 仓库和分支:
   ```powershell
   cd "d:\个人网页\Stellogic.github.io"
   git remote -v
   # 应显示: git@github.com:Stellogic/Stellogic.github.io.git
   
   git branch
   # 应在 hexo分支
   ```

2. 如果没有配置,执行:
   ```powershell
   git init
   git remote add origin git@github.com:Stellogic/Stellogic.github.io.git
   git checkout -b hexo分支
   ```

### 发布流程

```powershell
cd "d:\个人网页\Stellogic.github.io"

# 1. 添加所有更改
git add .

# 2. 提交更改(修改提交信息)
git commit -m "新增文章: 文章标题"

# 3. 推送到远程仓库
git push origin hexo分支

# 4. 生成并部署到 GitHub Pages
npx hexo clean
npx hexo deploy
```

### 常用提交信息模板

```bash
# 新增文章
git commit -m "新增文章: 文章标题"

# 修改文章
git commit -m "更新文章: 文章标题"

# 删除文章
git commit -m "删除文章: 文章标题"

# 批量导入
git commit -m "批量导入: 力扣hot100笔记 (15篇)"

# 修改配置
git commit -m "更新主题配置"
```

---

## 常见问题

### 1. 图片不显示

**原因**: 使用了不兼容的图片语法

**解决方案**:
- ✅ 使用: `{% asset_img 图片名.png 描述 %}`
- ❌ 不要用: `![](图片名.png)`

确保 `_config.yml` 中设置:
```yaml
post_asset_folder: true
```

### 2. 分类/标签页面空白

**解决方案**:
```powershell
cd "d:\个人网页\Stellogic.github.io"

# 使用 Hexo 命令创建页面
hexo new page categories
hexo new page tags

# 编辑 source\categories\index.md,添加:
---
title: 分类
layout: categories
---

# 编辑 source\tags\index.md,添加:
---
title: 标签
layout: tags
---

# 重新生成
npx hexo clean; npx hexo generate
```

### 3. 脚本执行失败

**错误**: `无法加载文件 Import-Notes.ps1,因为在此系统上禁止运行脚本`

**解决方案**:
```powershell
# 以管理员身份运行 PowerShell,执行:
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 4. 端口被占用

**错误**: `Port 4000 has been used`

**解决方案**:
```powershell
# 停止所有 Node 进程
Stop-Process -Name node -Force

# 或使用其他端口
npx hexo server -p 5000
```

### 5. 文章日期错误

手动编辑文章的 Front Matter:
```markdown
---
title: 文章标题
date: 2025-11-14 15:30:00
updated: 2025-11-14 16:00:00
---
```

### 6. 导入的文章标签不准确

手动编辑文章 Front Matter 中的 tags:
```markdown
---
title: 二分查找
tags:
  - 算法
  - 二分查找
  - LeetCode
---
```

---

## 文件结构说明

```
Stellogic.github.io/
├─ _config.yml              # Hexo 主配置文件
├─ package.json             # 项目依赖
├─ tools/
│  └─ Import-Notes.ps1      # 批量导入脚本
├─ source/
│  ├─ _posts/               # 文章目录
│  │  ├─ 文章1.md
│  │  ├─ 文章1/            # 文章1的资源文件夹
│  │  ├─ 文章2.md
│  │  └─ 文章2/
│  ├─ categories/
│  │  └─ index.md           # 分类页面
│  ├─ tags/
│  │  └─ index.md           # 标签页面
│  └─ about/
│     └─ index.md           # 关于页面
├─ themes/
│  └─ stellar/              # 主题目录
└─ public/                  # 生成的静态文件(自动生成,不需手动修改)
```

---

## 快速参考

### 常用命令速查表

```powershell
# === 文章管理 ===
hexo new "标题"                    # 新建文章
hexo new page "页面名"             # 新建页面

# === 本地预览 ===
hexo clean                         # 清理缓存
hexo generate                      # 生成静态文件(简写: hexo g)
hexo server                        # 启动服务器(简写: hexo s)
hexo server -p 5000                # 使用指定端口

# === 批量导入 ===
./tools/Import-Notes.ps1 -SourcePath "路径" -Categories "分类"

# === Git 发布 ===
git add .                          # 添加更改
git commit -m "提交信息"           # 提交
git push origin hexo分支           # 推送到远程

# === 部署 ===
hexo deploy                        # 部署到 GitHub Pages(简写: hexo d)
```

---

## 工作流程示例

### 完整的文章发布流程

```powershell
# 1. 进入项目目录
cd "d:\个人网页\Stellogic.github.io"

# 2. 创建新文章
hexo new "我的新文章"

# 3. 编辑文章(用你喜欢的编辑器)
# 编辑 source\_posts\我的新文章.md
# 添加图片到 source\_posts\我的新文章\ 文件夹

# 4. 本地预览
npx hexo clean
npx hexo generate
npx hexo server
# 访问 http://localhost:4000 检查效果

# 5. 确认无误后,提交到 Git
git add .
git commit -m "新增文章: 我的新文章"
git push origin hexo分支

# 6. 部署到 GitHub Pages
npx hexo deploy
```

---

## 技术支持

- Hexo 官方文档: https://hexo.io/zh-cn/docs/
- Keep 主题文档: https://keep-docs.xpoet.cn/
- GitHub 仓库: https://github.com/Stellogic/Stellogic.github.io

---

**最后更新**: 2025年11月14日
**版本**: 1.0
